<!DOCTYPE html>
<html>
  <head>
    <title>URL</title>
    <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"></script>
    <script>
      function getStorageItem(item)
      {
        var storageItem = window.localStorage.getItem(item);
        if (storageItem != null) return JSON.parse(storageItem);
        return null;
      }
      function setStorageItem(item, val)
      {
        window.localStorage.setItem(item, JSON.stringify(val));
      }
      function redirect(){
        var recentPages = getStorageItem("recent");
        if (recentPages == null) recentPages = [];
        
        recentPages.push($("#url").val());
        setStorageItem("recent", recentPages);
        window.location = $("#url").val();
        return false;
      }
      function addPageToFavorites(){
        var favorites = getStorageItem("favorites");
        if (favorites == null) favorites = [];
        
        favorites.push($("#url").val());
        setStorageItem("favorites", favorites);
        alert("Added to favorites");
        return false;
      }
      function displayList(contentArray, contentSelector, maxItems, listItemFunction){
        for(let recentPagesIndex = recentPages.length - 1; recentPagesIndex >= 0; recentPagesIndex--){
          var current = contentArray[recentPagesIndex];
          if (recentPagesIndex < maxItems)
            $(contentSelector).append(listItemFunction(current));
        }
      }
      jQuery(function(){
        var recentPages = getStorageItem("recent");
        if (recentPages == null) recentPages = [];
        
        var favorites = getStorageItem("favorites");
        if (favorites == null) favorites = [];
        
        displayList(favorites, "#favorites-content", 10, (current) => {return `<li><a style=\"font-size: 5vh;\" href=\"${current}\">${current}</a></li>`});
        displayList(recentPages, "#recentpages-content", 10, (current) => {return `<li><a style=\"font-size: 5vh;\" href=\"${current}\">${current}</a></li>`});
      });
    </script>
  </head>
  <body>
    <form onsubmit="return redirect()">
      <input value="http://" autocomplete="off" style="width: 88vw; height: 23vh; font-size: 23vh;" id="url" type="text" />
    </form>
    <form onsubmit="return addPageToFavorites()">
      <button type="button" style="width: 90vw; height: 25vh; font-size: 23vh;" id="btnFavorites" >Add Page To Favorites</button>
    </form>
    <div style="font-size: 8vh;">Favorites</div>
    <ul id="favorites-content">
    </ul>
    <div style="font-size: 8vh;">Recent Pages</div>
    <ul id="recentpages-content">
    </ul>
  </body>
</html>
